{
  "tool": {
    "name": "audit-log",
    "displayName": "Audit Log Viewer",
    "description": "Query promotion audit logs from marketing.company_promotion_log with filters",
    "version": "1.0.0",
    "category": "database",
    "type": "mcp"
  },
  "input": {
    "schema": {
      "type": "object",
      "properties": {
        "filters": {
          "type": "object",
          "properties": {
            "date_range": {
              "type": "array",
              "items": {
                "type": "string",
                "format": "date"
              },
              "minItems": 2,
              "maxItems": 2,
              "description": "Date range [start_date, end_date] in YYYY-MM-DD format"
            },
            "status": {
              "type": "string",
              "enum": ["PROMOTED", "FAILED", "ALL"],
              "default": "ALL",
              "description": "Filter by promotion status"
            },
            "batch_id": {
              "type": "string",
              "nullable": true,
              "description": "Filter by batch ID"
            }
          }
        }
      }
    }
  },
  "output": {
    "schema": {
      "type": "object",
      "properties": {
        "rows_returned": {
          "type": "integer",
          "description": "Number of audit log entries returned"
        },
        "results": {
          "type": "array",
          "items": {
            "type": "object",
            "properties": {
              "log_id": {
                "type": "string",
                "format": "uuid"
              },
              "promotion_timestamp": {
                "type": "string",
                "format": "date-time"
              },
              "promoted_unique_id": {
                "type": "string"
              },
              "process_id": {
                "type": "string"
              },
              "status": {
                "type": "string",
                "enum": ["PROMOTED", "FAILED"]
              },
              "error_log": {
                "type": ["array", "null"],
                "items": {
                  "type": "string"
                }
              },
              "doctrine_version": {
                "type": "string"
              },
              "batch_id": {
                "type": "string"
              }
            },
            "required": [
              "log_id",
              "promotion_timestamp",
              "promoted_unique_id",
              "process_id",
              "status",
              "doctrine_version",
              "batch_id"
            ]
          }
        },
        "altitude": {
          "type": "integer",
          "const": 10000
        },
        "doctrine": {
          "type": "string",
          "const": "STAMPED"
        }
      },
      "required": ["rows_returned", "results", "altitude", "doctrine"]
    }
  },
  "endpoint": {
    "url": "/api/audit-log",
    "method": "POST",
    "headers": {
      "Content-Type": "application/json"
    }
  },
  "database": {
    "table": "marketing.company_promotion_log",
    "connection": "composio-neon-bridge",
    "operations": ["SELECT"]
  },
  "stamped_compliance": {
    "source": "audit_log_viewer",
    "actor": "mcp_audit_tool",
    "method": "composio_neon_query",
    "environment": "production",
    "altitude": 10000,
    "doctrine": "STAMPED"
  }
}