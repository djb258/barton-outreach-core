# Global CTB Configuration - Barton Outreach Core
version: "1.0.0"
repository: barton-outreach-core
description: Marketing intelligence & executive enrichment platform with data visualization
parent_repo: imo-creator
last_synced: "2025-11-07"

# CTB Structure Configuration
ctb:
  enabled: true
  version: "1.3.2"
  branches:
    - sys      # System integrations and infrastructure
    - ai       # AI models, prompts, and training
    - data     # Database schemas and migrations
    - docs     # Documentation and guides
    - ui       # User interfaces and components
    - meta     # CTB metadata and registry

# Doctrine Enforcement
doctrine_enforcement:
  ctb_factory: ctb/sys/global-factory/
  auto_sync: true
  min_score: 70
  composio_scenario: CTB_Compliance_Cycle
  auto_remediate: true
  audit_frequency: monthly
  barton_doctrine_version: "1.3.2"
  compliance_status: "100%"

# Logging Configuration
logging:
  directory: logs/
  audit_enabled: true
  retention_days: 90
  levels:
    - audit
    - error
    - info
    - debug
  database_logging:
    enabled: true
    table: public.shq_error_log
    severity_levels:
      - info
      - warning
      - error
      - critical

# Integration Settings
integrations:
  composio:
    enabled: true
    mcp_url: http://localhost:3001/tool
    api_key_env: COMPOSIO_API_KEY
    user_id_env: COMPOSIO_USER_ID
    shared_with_imo_creator: true
  firebase:
    enabled: true
    config_path: ctb/sys/firebase/firebase.json
  neon:
    enabled: true
    database_url_env: DATABASE_URL
    host_env: NEON_HOST
    database_env: NEON_DATABASE
    user_env: NEON_USER
    password_env: NEON_PASSWORD
    connection_details:
      host: ep-ancient-waterfall-a42vy0du-pooler.us-east-1.aws.neon.tech
      port: 5432
      database: Marketing DB
      ssl_mode: require
  github:
    enabled: true
    factory_path: ctb/sys/github-factory/
    auto_sync_enabled: true
    projects_integration: true
    sync_script: infra/scripts/auto-sync-svg-ple-github.sh
  grafana_cloud:
    enabled: true
    instance_url: https://dbarton.grafana.net
    api_token_env: GRAFANA_API_TOKEN
    anonymous_access: true
    dashboards_path: grafana/provisioning/dashboards/

# HEIR/ORBT Configuration
heir_orbt:
  enabled: true
  heir_format: HEIR-YYYY-MM-SYSTEM-MODE-VN
  process_id_format: PRC-SYSTEM-EPOCHTIMESTAMP
  orbt_layers:
    1: Infrastructure
    2: Integration
    3: Application
    4: Presentation
  blueprint_version: "1.0"
  payload_format_required: true

# Barton Doctrine ID Configuration
barton_doctrine:
  enabled: true
  id_format: NN.NN.NN.NN.NNNNN.NNN
  subhive: "04"
  app: "outreach"
  layer: "04"
  schema: "02"
  version: "04"
  id_ranges:
    company: 04.04.02.04.30000.###
    slot: 04.04.02.04.10000.###
    people: 04.04.02.04.20000.###
    error: 04.04.02.04.40000.###
  auto_generation: true
  validation_required: true

# Database Configuration
database:
  providers:
    - firebase
    - neon
  migrations:
    directory: ctb/data/migrations/
    auto_run: false
    naming_convention: NNN_description.sql
  schema_validation: true
  schemas:
    - marketing
    - intake
    - public
    - bit
  tables:
    marketing:
      - company_master
      - company_slot
      - people_master
      - data_enrichment_log
      - pipeline_errors
      - duplicate_queue
    intake:
      - company_raw_intake
    public:
      - shq_error_log
      - linkedin_refresh_jobs
    bit:
      - events
  schema_map_path: docs/schema_map.json
  refresh_script: infra/scripts/schema-refresh.js

# AI Configuration
ai:
  providers:
    - gemini
    - openai
    - anthropic
  prompts_directory: ctb/ai/prompts/
  models_directory: ctb/ai/models/
  default_provider: anthropic
  enrichment_agents:
    - apify
    - abacus
    - firecrawl
  enrichment_config:
    tracking_table: marketing.data_enrichment_log
    agent_performance_monitoring: true
    timeout_minutes: 10
    retry_failed: true

# UI Configuration
ui:
  framework: react
  components_directory: ctb/ui/components/
  pages_directory: ctb/ui/pages/
  styling: tailwind
  grafana_dashboards:
    - barton-outreach-dashboard
    - executive-enrichment-monitoring
    - svg-ple-dashboard
  embedding_enabled: true

# Documentation
documentation:
  auto_generate: true
  formats:
    - markdown
    - json
  output_directory: ctb/docs/
  key_docs:
    - OUTREACH_DOCTRINE_A_Z_v1.3.2.md
    - FINAL_AUDIT_SUMMARY.md
    - CLAUDE.md
    - COMPOSIO_INTEGRATION.md (shared with imo-creator)
  enrichment_queries: infra/docs/ENRICHMENT_TRACKING_QUERIES.sql
  dashboard_guide: infra/docs/ENRICHMENT_TRACKING_DASHBOARD.md

# Maintenance
maintenance:
  auto_tag_new_files: true
  monthly_audit: true
  compliance_alerts: true
  alert_threshold: 85
  svg_ple_tracking:
    enabled: true
    tracker_file: infra/docs/svg-ple-todo.md
    current_progress: 53%
    phases: 6
    total_tasks: 30
    completed_tasks: 16

# Security
security:
  env_vars_required:
    - DATABASE_URL
    - NEON_HOST
    - NEON_DATABASE
    - NEON_USER
    - NEON_PASSWORD
    - COMPOSIO_API_KEY
    - GRAFANA_API_TOKEN
  secrets_detection: true
  vulnerability_scanning: true
  rls_enabled: true
  ssl_required: true

# Performance
performance:
  cache_enabled: true
  cache_ttl: 3600
  compression: true
  neon_connection_pooling: true
  max_connections: 10
  grafana_refresh_intervals:
    realtime: 10s
    frequent: 30s
    normal: 1m
    infrequent: 5m

# Monitoring
monitoring:
  grafana_cloud: true
  enrichment_tracking: true
  error_tracking: true
  performance_tracking: true
  dashboard_urls:
    overview: https://dbarton.grafana.net/d/barton-outreach-overview
    enrichment: https://dbarton.grafana.net/d/executive-enrichment-monitoring
    svg_ple: https://dbarton.grafana.net/d/svg-ple-dashboard

# Project Status
project_status:
  compliance_level: "100%"
  svg_ple_progress: "53%"
  dashboards_ready: 3
  database_configured: true
  grafana_cloud_active: true
  enrichment_system_operational: true

# Metadata
metadata:
  last_updated: "2025-11-07"
  parent_config: imo-creator/global-config.yaml
  maintainers:
    - Barton Outreach Team
  version_history:
    - version: "1.0.0"
      date: "2025-11-07"
      changes: Initial implementation from IMO Creator global config
      compliance: 100%
      status: Production Ready
