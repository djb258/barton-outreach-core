{
  "manifest_version": "1.0.0",
  "generated": "2025-11-07",
  "repository": "barton-outreach-core",
  "ctb_version": "1.3.3",
  "status": "pending_user_review",
  "summary": {
    "total_files_to_move": 121,
    "total_directories_to_move": 11,
    "documentation_files": 47,
    "python_scripts": 10,
    "configuration_files": 3,
    "source_code_files": 1,
    "estimated_time": "4-6 hours",
    "risk_level": "medium"
  },
  "warning": "⚠️ DO NOT EXECUTE without analyzing import paths first. This manifest is for planning purposes only.",
  "files_to_move": [
    {
      "category": "documentation_architecture",
      "files": [
        {
          "from": "ARCHITECTURE_SUMMARY.md",
          "to": "ctb/docs/architecture/ARCHITECTURE_SUMMARY.md",
          "type": "markdown",
          "risk": "low",
          "requires_import_update": false
        },
        {
          "from": "EVENT_DRIVEN_SYSTEM_README.md",
          "to": "ctb/docs/architecture/EVENT_DRIVEN_SYSTEM.md",
          "type": "markdown",
          "risk": "low",
          "requires_import_update": false
        },
        {
          "from": "REPO_STRUCTURE.md",
          "to": "ctb/docs/REPO_STRUCTURE.md",
          "type": "markdown",
          "risk": "low",
          "requires_import_update": false
        }
      ]
    },
    {
      "category": "documentation_integration",
      "files": [
        {
          "from": "BUILDER_IO_INTEGRATION_COMPLETE.md",
          "to": "ctb/docs/integration/BUILDER_IO.md",
          "type": "markdown",
          "risk": "low",
          "requires_import_update": false
        },
        {
          "from": "NEW_INTEGRATIONS_SUMMARY.md",
          "to": "ctb/docs/integration/SUMMARY.md",
          "type": "markdown",
          "risk": "low",
          "requires_import_update": false
        },
        {
          "from": "INTEGRATION_GUIDE.md",
          "to": "ctb/docs/guides/INTEGRATION_GUIDE.md",
          "type": "markdown",
          "risk": "low",
          "requires_import_update": false
        }
      ]
    },
    {
      "category": "documentation_audit",
      "files": [
        {
          "from": "CTB_AUDIT_REPORT.md",
          "to": "ctb/docs/audit/CTB_AUDIT_REPORT.md",
          "type": "markdown",
          "risk": "low",
          "requires_import_update": false
        },
        {
          "from": "CTB_COMPLIANCE_REPORT_2025-10-24.md",
          "to": "ctb/docs/audit/CTB_COMPLIANCE_REPORT.md",
          "type": "markdown",
          "risk": "low",
          "requires_import_update": false
        },
        {
          "from": "CTB_REMEDIATION_SUMMARY.md",
          "to": "ctb/docs/audit/CTB_REMEDIATION_SUMMARY.md",
          "type": "markdown",
          "risk": "low",
          "requires_import_update": false
        },
        {
          "from": "CTB_TAGGING_REPORT.md",
          "to": "ctb/docs/audit/CTB_TAGGING_REPORT.md",
          "type": "markdown",
          "risk": "low",
          "requires_import_update": false
        },
        {
          "from": "CTB_VISUAL_COMPARISON.md",
          "to": "ctb/docs/audit/CTB_VISUAL_COMPARISON.md",
          "type": "markdown",
          "risk": "low",
          "requires_import_update": false
        }
      ]
    },
    {
      "category": "documentation_ctb_meta",
      "files": [
        {
          "from": "CTB_ENFORCEMENT.md",
          "to": "ctb/meta/CTB_ENFORCEMENT.md",
          "type": "markdown",
          "risk": "low",
          "requires_import_update": false
        },
        {
          "from": "CTB_INDEX.md",
          "to": "ctb/meta/CTB_INDEX.md",
          "type": "markdown",
          "risk": "low",
          "requires_import_update": false
        },
        {
          "from": "CTB_VERIFICATION_CHECKLIST.md",
          "to": "ctb/meta/CTB_VERIFICATION_CHECKLIST.md",
          "type": "markdown",
          "risk": "low",
          "requires_import_update": false
        }
      ]
    },
    {
      "category": "documentation_changelog",
      "files": [
        {
          "from": "BIG_UPDATE_SUMMARY.md",
          "to": "ctb/docs/changelog/BIG_UPDATE_SUMMARY.md",
          "type": "markdown",
          "risk": "low",
          "requires_import_update": false
        },
        {
          "from": "GLOBAL_CONFIG_COMPLETE_SYNC.md",
          "to": "ctb/docs/changelog/GLOBAL_CONFIG_SYNC.md",
          "type": "markdown",
          "risk": "low",
          "requires_import_update": false
        },
        {
          "from": "GLOBAL_CONFIG_SYNC_COMPLETE.md",
          "to": "ctb/docs/changelog/GLOBAL_CONFIG_SYNC_COMPLETE.md",
          "type": "markdown",
          "risk": "low",
          "requires_import_update": false
        }
      ]
    },
    {
      "category": "documentation_sessions",
      "files": [
        {
          "from": "SESSION_SUMMARY_2025-10-24.md",
          "to": "ctb/docs/sessions/SESSION_SUMMARY_2025-10-24.md",
          "type": "markdown",
          "risk": "low",
          "requires_import_update": false
        }
      ]
    },
    {
      "category": "documentation_grafana",
      "files": [
        {
          "from": "GRAFANA_CLOUD_SETUP_GUIDE.md",
          "to": "ctb/sys/grafana/docs/CLOUD_SETUP.md",
          "type": "markdown",
          "risk": "low",
          "requires_import_update": false
        },
        {
          "from": "GRAFANA_LOGIN_TROUBLESHOOTING.md",
          "to": "ctb/sys/grafana/docs/TROUBLESHOOTING.md",
          "type": "markdown",
          "risk": "low",
          "requires_import_update": false
        },
        {
          "from": "GRAFANA_SETUP.md",
          "to": "ctb/sys/grafana/docs/SETUP.md",
          "type": "markdown",
          "risk": "low",
          "requires_import_update": false
        },
        {
          "from": "GRAFANA_SETUP_COMPLETE.md",
          "to": "ctb/sys/grafana/docs/SETUP_COMPLETE.md",
          "type": "markdown",
          "risk": "low",
          "requires_import_update": false
        },
        {
          "from": "IMPORT_DASHBOARDS_NOW.md",
          "to": "ctb/sys/grafana/docs/IMPORT_DASHBOARDS.md",
          "type": "markdown",
          "risk": "low",
          "requires_import_update": false
        },
        {
          "from": "PUSH_DASHBOARDS_TO_GRAFANA_CLOUD.md",
          "to": "ctb/sys/grafana/docs/PUSH_DASHBOARDS.md",
          "type": "markdown",
          "risk": "low",
          "requires_import_update": false
        }
      ]
    },
    {
      "category": "documentation_n8n",
      "files": [
        {
          "from": "N8N_HOSTED_SETUP_GUIDE.md",
          "to": "ctb/sys/n8n/docs/HOSTED_SETUP.md",
          "type": "markdown",
          "risk": "low",
          "requires_import_update": false
        },
        {
          "from": "N8N_MESSAGING_SETUP.md",
          "to": "ctb/sys/n8n/docs/MESSAGING.md",
          "type": "markdown",
          "risk": "low",
          "requires_import_update": false
        }
      ]
    },
    {
      "category": "documentation_neon",
      "files": [
        {
          "from": "NEON_CONNECTION_GUIDE.md",
          "to": "ctb/sys/neon-vault/docs/CONNECTION.md",
          "type": "markdown",
          "risk": "low",
          "requires_import_update": false
        }
      ]
    },
    {
      "category": "documentation_schemas",
      "files": [
        {
          "from": "CURRENT_NEON_SCHEMA.md",
          "to": "ctb/data/schemas/CURRENT_SCHEMA.md",
          "type": "markdown",
          "risk": "low",
          "requires_import_update": false
        },
        {
          "from": "SCHEMA_QUICK_REFERENCE.md",
          "to": "ctb/data/schemas/QUICK_REFERENCE.md",
          "type": "markdown",
          "risk": "low",
          "requires_import_update": false
        }
      ]
    },
    {
      "category": "documentation_general",
      "files": [
        {
          "from": "CONTRIBUTING.md",
          "to": "ctb/docs/CONTRIBUTING.md",
          "type": "markdown",
          "risk": "low",
          "requires_import_update": false
        },
        {
          "from": "DEPENDENCIES.md",
          "to": "ctb/docs/DEPENDENCIES.md",
          "type": "markdown",
          "risk": "low",
          "requires_import_update": false
        },
        {
          "from": "ENTRYPOINT.md",
          "to": "ctb/docs/ENTRYPOINT.md",
          "type": "markdown",
          "risk": "low",
          "requires_import_update": true,
          "note": "May reference paths that need updating"
        },
        {
          "from": "NO_DOCKER_ALTERNATIVES.md",
          "to": "ctb/docs/guides/NO_DOCKER_ALTERNATIVES.md",
          "type": "markdown",
          "risk": "low",
          "requires_import_update": false
        },
        {
          "from": "QUICKREF.md",
          "to": "ctb/docs/QUICKREF.md",
          "type": "markdown",
          "risk": "low",
          "requires_import_update": false
        },
        {
          "from": "QUICK_START_GITHUB_PROJECTS.md",
          "to": "ctb/docs/guides/QUICK_START_GITHUB_PROJECTS.md",
          "type": "markdown",
          "risk": "low",
          "requires_import_update": false
        }
      ]
    },
    {
      "category": "documentation_templates",
      "files": [
        {
          "from": "COMPOSIO_AGENT_TEMPLATE.md",
          "to": "ctb/ai/templates/COMPOSIO_AGENT_TEMPLATE.md",
          "type": "markdown",
          "risk": "low",
          "requires_import_update": false
        }
      ]
    },
    {
      "category": "documentation_global_config",
      "files": [
        {
          "from": "GLOBAL_CONFIG_IMPLEMENTATION.md",
          "to": "ctb/meta/global-config/IMPLEMENTATION.md",
          "type": "markdown",
          "risk": "low",
          "requires_import_update": false
        }
      ]
    },
    {
      "category": "python_migrations",
      "files": [
        {
          "from": "add_email_verification_tracking.py",
          "to": "ctb/data/migrations/add_email_verification_tracking.py",
          "type": "python",
          "risk": "high",
          "requires_import_update": true,
          "note": "May have database connection imports that need updating"
        },
        {
          "from": "assign_messages_to_contacts.py",
          "to": "ctb/data/migrations/assign_messages_to_contacts.py",
          "type": "python",
          "risk": "high",
          "requires_import_update": true,
          "note": "May have database connection imports that need updating"
        },
        {
          "from": "create_db_views.py",
          "to": "ctb/data/migrations/create_db_views.py",
          "type": "python",
          "risk": "high",
          "requires_import_update": true,
          "note": "May have database connection imports that need updating"
        }
      ]
    },
    {
      "category": "python_tools",
      "files": [
        {
          "from": "check_companies.py",
          "to": "ctb/sys/tools/check_companies.py",
          "type": "python",
          "risk": "high",
          "requires_import_update": true,
          "note": "Likely imports database models or utilities"
        },
        {
          "from": "check_db_schema.py",
          "to": "ctb/sys/tools/check_db_schema.py",
          "type": "python",
          "risk": "high",
          "requires_import_update": true,
          "note": "Database connection script - imports need verification"
        },
        {
          "from": "check_message_status.py",
          "to": "ctb/sys/tools/check_message_status.py",
          "type": "python",
          "risk": "high",
          "requires_import_update": true,
          "note": "May import database models"
        },
        {
          "from": "check_pipeline_events.py",
          "to": "ctb/sys/tools/check_pipeline_events.py",
          "type": "python",
          "risk": "high",
          "requires_import_update": true,
          "note": "May have imports from root-level modules"
        }
      ]
    },
    {
      "category": "python_ai_scripts",
      "files": [
        {
          "from": "trigger_enrichment.py",
          "to": "ctb/ai/scripts/trigger_enrichment.py",
          "type": "python",
          "risk": "high",
          "requires_import_update": true,
          "note": "AI script - likely imports from multiple locations"
        }
      ]
    },
    {
      "category": "configuration_deployment",
      "files": [
        {
          "from": "render.yaml",
          "to": "ctb/sys/deployment/render.yaml",
          "type": "yaml",
          "risk": "medium",
          "requires_import_update": false,
          "note": "Deployment config - may reference file paths. Consider keeping at root with symlink."
        },
        {
          "from": "global-config.yaml",
          "to": "ctb/meta/global-config/global-config.yaml",
          "type": "yaml",
          "risk": "medium",
          "requires_import_update": true,
          "note": "Global config - may be referenced by scripts"
        }
      ]
    },
    {
      "category": "source_code",
      "files": [
        {
          "from": "src/main.py",
          "to": "ctb/ai/main.py",
          "type": "python",
          "risk": "critical",
          "requires_import_update": true,
          "note": "Main entry point - ALL imports need careful analysis. Alternative: ctb/sys/api/main.py if API-focused",
          "decision_required": true
        }
      ]
    }
  ],
  "directories_to_move": [
    {
      "from": "doctrine/",
      "to": "ctb/meta/doctrine/",
      "type": "directory",
      "risk": "medium",
      "contains_files": true,
      "requires_import_update": false,
      "note": "Doctrine files for meta configuration"
    },
    {
      "from": "HEIR-AGENT-SYSTEM/",
      "to": "ctb/ai/agents/HEIR-AGENT-SYSTEM/",
      "type": "directory",
      "risk": "high",
      "contains_files": true,
      "requires_import_update": true,
      "note": "HEIR agent system - many imports likely need updating"
    },
    {
      "from": "ids/",
      "to": "ctb/meta/ids/",
      "type": "directory",
      "risk": "low",
      "contains_files": true,
      "requires_import_update": false,
      "note": "ID management files"
    },
    {
      "from": "infra/",
      "to": "ctb/sys/infra/",
      "type": "directory",
      "risk": "medium",
      "contains_files": true,
      "requires_import_update": false,
      "note": "Infrastructure configs - check for overlap with ctb/data/infra"
    },
    {
      "from": "libs/imo_tools/",
      "to": "ctb/sys/libs/imo_tools/",
      "type": "directory",
      "risk": "critical",
      "contains_files": true,
      "requires_import_update": true,
      "note": "Shared library - ALL code importing from libs.imo_tools needs updating to ctb.sys.libs.imo_tools"
    },
    {
      "from": "migrations/",
      "to": "ctb/data/migrations/",
      "type": "directory",
      "risk": "medium",
      "contains_files": true,
      "requires_import_update": false,
      "note": "Merge with existing ctb/data/migrations/"
    },
    {
      "from": "ops/",
      "to": "ctb/ops/automation-scripts/",
      "type": "directory",
      "risk": "medium",
      "contains_files": true,
      "requires_import_update": true,
      "note": "Operations scripts - evaluate per file, some may go to ctb/sys/ops"
    },
    {
      "from": "ui_specs/",
      "to": "ctb/ui/specs/",
      "type": "directory",
      "risk": "low",
      "contains_files": true,
      "requires_import_update": false,
      "note": "UI specifications"
    },
    {
      "from": "workflows/",
      "to": "ctb/sys/n8n/workflows/",
      "type": "directory",
      "risk": "low",
      "contains_files": true,
      "requires_import_update": false,
      "note": "N8N workflows - OR move to ctb/ai/workflows if AI-focused"
    }
  ],
  "duplicate_directories": [
    {
      "root_dir": "docs/",
      "ctb_dir": "ctb/docs/",
      "action": "compare_and_merge",
      "risk": "medium",
      "note": "Compare contents, merge unique files into ctb/docs/, then delete root docs/"
    },
    {
      "root_dir": "ui/",
      "ctb_dir": "ctb/ui/",
      "action": "compare_and_merge",
      "risk": "medium",
      "note": "Compare contents, merge unique files into ctb/ui/, then delete root ui/"
    },
    {
      "root_dir": "grafana/",
      "ctb_dir": "ctb/sys/grafana/",
      "action": "move_contents",
      "risk": "low",
      "note": "Move all contents to ctb/sys/grafana/, then delete root grafana/"
    }
  ],
  "keep_at_root": [
    {
      "file": "README.md",
      "reason": "Primary repository documentation"
    },
    {
      "file": "CLAUDE.md",
      "reason": "AI context file"
    },
    {
      "file": "package.json",
      "reason": "Node.js project definition"
    },
    {
      "file": "requirements.txt",
      "reason": "Python dependencies"
    },
    {
      "file": ".gitignore",
      "reason": "Git configuration"
    },
    {
      "file": ".env.example",
      "reason": "Environment variables template"
    },
    {
      "file": "LICENSE",
      "reason": "Repository license"
    },
    {
      "directory": "apps/",
      "reason": "Active application development workspace - keep at root for convenience",
      "note": "User decision pending: move to ctb/ui/apps/ or keep at root?"
    },
    {
      "directory": "node_modules/",
      "reason": "Dependencies - always at root"
    },
    {
      "directory": "dist/",
      "reason": "Build artifacts - gitignored"
    },
    {
      "directory": "logs/",
      "reason": "Runtime logs - gitignored"
    },
    {
      "directory": ".git/",
      "reason": "Git repository data"
    },
    {
      "directory": "global-config/",
      "reason": "Global configuration - referenced by many scripts, keep at root for now"
    }
  ],
  "import_analysis_required": [
    "libs/imo_tools/**/*.py",
    "src/main.py",
    "HEIR-AGENT-SYSTEM/**/*.py",
    "check_*.py",
    "trigger_enrichment.py",
    "**/migrations/**/*.py"
  ],
  "recommended_approach": {
    "phase_1": {
      "name": "Documentation files (low risk)",
      "files": 47,
      "estimated_time": "2-3 hours",
      "risk": "low",
      "can_proceed": true
    },
    "phase_2": {
      "name": "Python scripts (high risk)",
      "files": 10,
      "estimated_time": "2-3 hours",
      "risk": "high",
      "can_proceed": false,
      "blocker": "Requires import path analysis first"
    },
    "phase_3": {
      "name": "Directories (critical risk)",
      "directories": 9,
      "estimated_time": "4-6 hours",
      "risk": "critical",
      "can_proceed": false,
      "blocker": "Requires comprehensive import analysis across entire codebase"
    }
  },
  "next_steps": [
    {
      "step": 1,
      "action": "Review this manifest with user",
      "purpose": "Confirm file movements and identify any concerns"
    },
    {
      "step": 2,
      "action": "Analyze import statements",
      "command": "grep -r 'from libs.imo_tools' . --include='*.py'",
      "purpose": "Identify all imports that will break"
    },
    {
      "step": 3,
      "action": "Create import update script",
      "purpose": "Automated import path fixes after moves"
    },
    {
      "step": 4,
      "action": "Move documentation files (Phase 1)",
      "purpose": "Low-risk first phase to test process"
    },
    {
      "step": 5,
      "action": "Update and test Python imports (Phase 2)",
      "purpose": "Fix imports before moving Python files"
    },
    {
      "step": 6,
      "action": "Move directories (Phase 3)",
      "purpose": "Final high-risk phase with full testing"
    }
  ],
  "user_decisions_required": [
    {
      "question": "Where should src/main.py go?",
      "options": [
        "ctb/ai/main.py (if AI/agent focused)",
        "ctb/sys/api/main.py (if API server focused)",
        "Stay at root as src/main.py"
      ]
    },
    {
      "question": "What to do with apps/ directory?",
      "options": [
        "Move to ctb/ui/apps/",
        "Keep at root for development convenience"
      ]
    },
    {
      "question": "Should deployment configs move?",
      "options": [
        "Move to ctb/sys/deployment/ with symlinks from root",
        "Move to ctb/sys/deployment/ and update deployment tools",
        "Keep at root for simplicity"
      ]
    }
  ]
}
