# DOL Filings Hub Manifest
# Altitude: 40k (System Infrastructure)
# Version: 3.0.0

# =============================================================================
# CONSTITUTIONAL COMPLIANCE (IMO-Creator v1.0)
# =============================================================================
constitutional:
  doctrine_version: "IMO-Creator v1.0"
  prd_reference: "docs/prd/PRD_DOL_SUBHUB.md"
  domain_spec: "doctrine/REPO_DOMAIN_SPEC.md"
  cc_layer: CC-02

  # Pass Structure (Constitutional)
  passes:
    - name: CAPTURE
      imo_layer: I
      description: "Receive federal DOL data downloads, EIN lookup requests"
    - name: COMPUTE
      imo_layer: M
      description: "Filing parsing, Schedule A extraction, EIN matching, renewal calculation"
    - name: GOVERN
      imo_layer: O
      description: "Emit FORM_5500_FILED, LARGE_PLAN, BROKER_CHANGE signals to BIT Engine"

  # PRD Section References
  constants_ref: "docs/prd/PRD_DOL_SUBHUB.md ยง3 Constants"
  variables_ref: "docs/prd/PRD_DOL_SUBHUB.md ยง3 Variables"

hub:
  id: HUB-DOL
  name: DOL Filings Hub
  doctrine_id: "04.04.03"
  type: sub-hub
  version: "3.0.0"
  description: |
    Owns federal Form 5500 filing data, Schedule A insurance data,
    and compliance intelligence. Source of truth for plan renewal
    dates and broker relationships.

# Classification (LOCKED - used by vw_sovereign_completion)
classification:
  type: required
  gates_completion: true
  waterfall_order: 2

core_metric:
  name: FILING_MATCH_RATE
  description: Percentage of filings matched to company_master
  aggregation: percentage
  thresholds:
    healthy: ">= 0.9"
    degraded: ">= 0.7"
    critical: "< 0.7"

entities_owned:
  - form_5500
  - form_5500_sf
  - schedule_a
  - renewal_calendar
  - filing_history

imo:
  input:
    - federal_data_loader
    - company_spoke_receiver
  middle:
    - filing_parser
    - schedule_a_extractor
    - ein_matcher
    - renewal_calculator
  output:
    - company_spoke_out

spokes:
  ingress_from:
    - SPOKE-COMPANY-EGRESS
  egress_to:
    - SPOKE-COMPANY-INGRESS

boundary_rules:
  does_not_own:
    - company_master        # Company Hub owns
    - people_master         # People Hub owns
    - bit_scores            # Company Hub owns
  data_source: |
    Federal DOL data downloads are authoritative.
    EIN matching to companies is an egress spoke operation.
