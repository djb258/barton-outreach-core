{
  "version": "1.0.0",
  "blueprint_id": "04.svg.marketing.outreach.v1",
  "last_updated": "2025-11-13",
  "tools": [
    {
      "tool_id": "router",
      "name": "Router (Messy Logic)",
      "description": "Intake router — tags payloads and forwards to correct destination. Handles invalid data routing to Google Sheets for manual review.",
      "barton_id": "04.04.02.04.10000.001",
      "altitude": 20000,
      "enabled": true,
      "frontend": {
        "route": "/router",
        "icon": "Route",
        "color": "tool-router",
        "api_prefix": "/api/messyflow"
      },
      "backend": {
        "entrypoint": "ctb/sys/toolbox-hub/backend/router/main.py",
        "neon_tables": {
          "input": "marketing.pipeline_errors",
          "output": "marketing.duplicate_queue",
          "audit": "shq.audit_log"
        },
        "dependencies": ["google-sheets-api", "neon-db"],
        "kill_switch_condition": "error_rate > 0.5"
      },
      "integration": {
        "n8n_webhook": "/hooks/messyflow-router",
        "event_types": ["validation.failed", "duplicate.detected"],
        "required_env": ["GOOGLE_SHEETS_API_KEY", "NEON_CONNECTION_STRING"]
      }
    },
    {
      "tool_id": "validator",
      "name": "Validator (Neon Agent)",
      "description": "Runs enrichment + validation rules stored in Neon. Validates company data, executive slots, and enrichment results.",
      "barton_id": "04.04.02.04.10000.002",
      "altitude": 18000,
      "enabled": true,
      "frontend": {
        "route": "/validator",
        "icon": "CheckCircle",
        "color": "tool-validator",
        "api_prefix": "/api/validator"
      },
      "backend": {
        "entrypoint": "ctb/sys/toolbox-hub/backend/validator/main.py",
        "neon_tables": {
          "input": "marketing.company_master",
          "output": "marketing.company_slot",
          "rules": "marketing.validation_rules",
          "audit": "shq.audit_log",
          "errors": "shq.error_master"
        },
        "dependencies": ["neon-db", "validation-engine"],
        "kill_switch_condition": "validation_failures > 100"
      },
      "integration": {
        "n8n_webhook": "/hooks/validator",
        "event_types": ["validation.requested", "validation.completed"],
        "required_env": ["NEON_CONNECTION_STRING"]
      }
    },
    {
      "tool_id": "mapper",
      "name": "Mapper",
      "description": "Field mapping tool for CSV/API → STAMPED schema. Maps external data formats to internal Barton schema.",
      "barton_id": "04.04.02.04.10000.003",
      "altitude": 16000,
      "enabled": true,
      "frontend": {
        "route": "/mapper",
        "icon": "Map",
        "color": "tool-mapper",
        "api_prefix": "/api/mapper"
      },
      "backend": {
        "entrypoint": "ctb/sys/toolbox-hub/backend/mapper/main.py",
        "neon_tables": {
          "input": "intake.company_raw_intake",
          "output": "marketing.company_master",
          "mappings": "config.field_mappings",
          "audit": "shq.audit_log"
        },
        "dependencies": ["neon-db", "pandas"],
        "kill_switch_condition": "mapping_errors > 50"
      },
      "integration": {
        "n8n_webhook": "/hooks/mapper",
        "event_types": ["mapping.requested", "mapping.completed"],
        "required_env": ["NEON_CONNECTION_STRING"]
      }
    },
    {
      "tool_id": "parser",
      "name": "Parser",
      "description": "PDF / Doc parser for extracting structured data. Extracts company information from documents.",
      "barton_id": "04.04.02.04.10000.004",
      "altitude": 14000,
      "enabled": true,
      "frontend": {
        "route": "/parser",
        "icon": "FileText",
        "color": "tool-parser",
        "api_prefix": "/api/parser"
      },
      "backend": {
        "entrypoint": "ctb/sys/toolbox-hub/backend/parser/main.py",
        "neon_tables": {
          "output": "intake.company_raw_intake",
          "audit": "shq.audit_log"
        },
        "dependencies": ["pypdf2", "python-docx", "neon-db"],
        "kill_switch_condition": "parse_failures > 20"
      },
      "integration": {
        "n8n_webhook": "/hooks/parser",
        "event_types": ["parse.requested", "parse.completed"],
        "required_env": ["NEON_CONNECTION_STRING"]
      }
    },
    {
      "tool_id": "docfiller",
      "name": "Doc Filler",
      "description": "Fills templates with mapped data. Creates documents from enriched company and executive data.",
      "barton_id": "04.04.02.04.10000.005",
      "altitude": 12000,
      "enabled": true,
      "frontend": {
        "route": "/doc-filler",
        "icon": "FileEdit",
        "color": "tool-docfiller",
        "api_prefix": "/api/doc-filler"
      },
      "backend": {
        "entrypoint": "ctb/sys/toolbox-hub/backend/docfiller/main.py",
        "neon_tables": {
          "input": "marketing.company_master",
          "people": "marketing.people_master",
          "templates": "config.document_templates",
          "audit": "shq.audit_log"
        },
        "dependencies": ["jinja2", "neon-db", "google-docs-api"],
        "kill_switch_condition": "template_errors > 10"
      },
      "integration": {
        "n8n_webhook": "/hooks/doc-filler",
        "event_types": ["docfill.requested", "docfill.completed"],
        "required_env": ["NEON_CONNECTION_STRING", "GOOGLE_DOCS_API_KEY"]
      }
    },
    {
      "tool_id": "logger",
      "name": "Logger / Monitor",
      "description": "Central dashboard for audit + error tracking. Monitors all tool operations and system health.",
      "barton_id": "04.04.02.04.10000.006",
      "altitude": 10000,
      "enabled": true,
      "frontend": {
        "route": "/logger",
        "icon": "Database",
        "color": "tool-logger",
        "api_prefix": "/api/logger"
      },
      "backend": {
        "entrypoint": "ctb/sys/toolbox-hub/backend/logger/main.py",
        "neon_tables": {
          "audit": "shq.audit_log",
          "errors": "shq.error_master",
          "enrichment": "marketing.data_enrichment_log",
          "pipeline": "marketing.pipeline_errors"
        },
        "dependencies": ["neon-db", "grafana-api"],
        "kill_switch_condition": "critical_errors > 5"
      },
      "integration": {
        "n8n_webhook": "/hooks/logger",
        "event_types": ["log.created", "error.logged", "audit.created"],
        "required_env": ["NEON_CONNECTION_STRING", "GRAFANA_API_TOKEN"]
      }
    },
    {
      "tool_id": "documentation",
      "name": "Documentation",
      "description": "Self-documenting dashboard explaining how all tools tie together. Central knowledge base for the toolbox ecosystem.",
      "barton_id": "04.04.02.04.10000.007",
      "altitude": 8000,
      "enabled": true,
      "frontend": {
        "route": "/documentation",
        "icon": "BookOpen",
        "color": "tool-docs",
        "api_prefix": "/api/docs"
      },
      "backend": {
        "entrypoint": "ctb/sys/toolbox-hub/backend/documentation/main.py",
        "neon_tables": {
          "docs": "config.documentation",
          "audit": "shq.audit_log"
        },
        "dependencies": ["markdown", "neon-db"],
        "kill_switch_condition": null
      },
      "integration": {
        "n8n_webhook": null,
        "event_types": ["docs.viewed", "docs.searched"],
        "required_env": ["NEON_CONNECTION_STRING"]
      }
    }
  ],
  "global_config": {
    "master_hub_url": "https://barton-outreach-core.onrender.com",
    "neon_connection": {
      "host": "ep-ancient-waterfall-a42vy0du-pooler.us-east-1.aws.neon.tech",
      "port": 5432,
      "database": "Marketing DB",
      "ssl_mode": "require"
    },
    "logging": {
      "level": "INFO",
      "format": "json",
      "outputs": ["neon", "grafana", "console"]
    },
    "rate_limits": {
      "per_tool_per_minute": 60,
      "global_per_minute": 300
    }
  }
}
