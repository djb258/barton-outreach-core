{
  "dashboard": {
    "name": "Barton Outreach - Error Monitoring",
    "description": "Real-time error tracking and operational health monitoring for all agents and processes",
    "version": "1.0",
    "refresh_interval": 30,
    "theme": {
      "primary_color": "#3b82f6",
      "danger_color": "#DC3545",
      "warning_color": "#FFC107",
      "success_color": "#28A745",
      "error_color": "#FD7E14",
      "info_color": "#28A745"
    },
    "doctrine_colors": {
      "info": "#28A745",
      "warning": "#FFC107",
      "error": "#FD7E14",
      "critical": "#DC3545"
    },
    "widgets": [
      {
        "id": "error_counter_critical",
        "type": "counter",
        "label": "🔴 Critical Errors (Unresolved)",
        "description": "Count of unresolved critical errors requiring immediate attention",
        "query": {
          "collection": "error_log",
          "where": [
            ["severity", "==", "critical"],
            ["resolved", "==", false]
          ]
        },
        "alert": {
          "threshold": 1,
          "action": "push_notification",
          "channels": ["slack", "email", "sms"],
          "message": "🚨 Critical errors detected - immediate action required",
          "escalation": {
            "delay_minutes": 15,
            "recipients": ["oncall@example.com"]
          }
        },
        "position": {
          "row": 1,
          "col": 1,
          "width": 3,
          "height": 2
        }
      },
      {
        "id": "error_counter_open",
        "type": "counter",
        "label": "⚠️ Open Errors (All Severities)",
        "description": "Total count of all unresolved errors across the system",
        "query": {
          "collection": "error_log",
          "where": [["resolved", "==", false]]
        },
        "position": {
          "row": 1,
          "col": 4,
          "width": 3,
          "height": 2
        }
      },
      {
        "id": "error_counter_resolved_24h",
        "type": "counter",
        "label": "✅ Resolved (Last 24h)",
        "description": "Errors resolved in the last 24 hours",
        "query": {
          "collection": "error_log",
          "where": [
            ["resolved", "==", true],
            ["last_touched", ">=", "now-24h"]
          ]
        },
        "position": {
          "row": 1,
          "col": 7,
          "width": 3,
          "height": 2
        }
      },
      {
        "id": "severity_breakdown",
        "type": "pie",
        "label": "📊 Error Severity Breakdown (Last 24h)",
        "description": "Distribution of errors by severity level in the last 24 hours",
        "query": {
          "collection": "error_log",
          "where": [
            ["timestamp", ">=", "now-24h"]
          ],
          "groupBy": "severity"
        },
        "colors": {
          "info": "#28A745",
          "warning": "#FFC107",
          "error": "#FD7E14",
          "critical": "#DC3545"
        },
        "position": {
          "row": 3,
          "col": 1,
          "width": 4,
          "height": 4
        }
      },
      {
        "id": "agent_error_rates",
        "type": "bar",
        "label": "🤖 Agent Error Rates (Last 7 days)",
        "description": "Error count by agent, showing which agents are encountering the most issues",
        "query": {
          "collection": "error_log",
          "where": [
            ["timestamp", ">=", "now-7d"]
          ],
          "groupBy": "agent_name",
          "orderBy": ["count", "desc"],
          "limit": 10
        },
        "position": {
          "row": 3,
          "col": 5,
          "width": 5,
          "height": 4
        }
      },
      {
        "id": "recent_errors",
        "type": "table",
        "label": "🕒 Recent Errors (Last 25)",
        "description": "Most recent errors logged across all agents and processes",
        "query": {
          "collection": "error_log",
          "orderBy": ["timestamp", "desc"],
          "limit": 25
        },
        "columns": [
          {
            "field": "timestamp",
            "label": "Time",
            "format": "relative",
            "width": 120
          },
          {
            "field": "severity",
            "label": "Severity",
            "format": "badge",
            "width": 100,
            "badge_color_field": "color",
            "badge_colors": {
              "info": "#28A745",
              "warning": "#FFC107",
              "error": "#FD7E14",
              "critical": "#DC3545"
            }
          },
          {
            "field": "agent_name",
            "label": "Agent",
            "width": 180
          },
          {
            "field": "process_id",
            "label": "Process",
            "width": 200
          },
          {
            "field": "message",
            "label": "Message",
            "truncate": 60,
            "width": 300
          },
          {
            "field": "color",
            "label": "Color",
            "format": "color_swatch",
            "width": 80,
            "visible": false
          },
          {
            "field": "resolved",
            "label": "Status",
            "format": "boolean",
            "width": 100,
            "values": {
              "true": "✅ Resolved",
              "false": "⏳ Open"
            }
          }
        ],
        "actions": [
          {
            "label": "View Details",
            "action": "navigate",
            "target": "/errors/:error_id",
            "icon": "eye"
          },
          {
            "label": "Mark Resolved",
            "action": "update",
            "field": "resolved",
            "value": true,
            "icon": "check",
            "confirmation": "Mark this error as resolved?",
            "requires_note": true
          }
        ],
        "position": {
          "row": 7,
          "col": 1,
          "width": 9,
          "height": 6
        }
      },
      {
        "id": "error_timeline",
        "type": "line",
        "label": "📈 Error Timeline (Last 7 days)",
        "description": "Trend of errors over time by severity level",
        "query": {
          "collection": "error_log",
          "where": [
            ["timestamp", ">=", "now-7d"]
          ],
          "groupBy": {
            "field": "timestamp",
            "interval": "1h"
          },
          "groupBy2": "severity"
        },
        "series": [
          {"name": "info", "color": "#28A745"},
          {"name": "warning", "color": "#FFC107"},
          {"name": "error", "color": "#FD7E14"},
          {"name": "critical", "color": "#DC3545"}
        ],
        "position": {
          "row": 13,
          "col": 1,
          "width": 9,
          "height": 4
        }
      },
      {
        "id": "resolution_rate",
        "type": "gauge",
        "label": "🎯 Resolution Rate (Last 30 days)",
        "description": "Percentage of errors resolved within the last 30 days",
        "query": {
          "collection": "error_log",
          "where": [
            ["timestamp", ">=", "now-30d"]
          ],
          "aggregate": "percentage",
          "field": "resolved",
          "value": true
        },
        "thresholds": [
          {"value": 90, "color": "green", "label": "Excellent"},
          {"value": 75, "color": "yellow", "label": "Good"},
          {"value": 50, "color": "orange", "label": "Fair"},
          {"value": 0, "color": "red", "label": "Poor"}
        ],
        "position": {
          "row": 17,
          "col": 1,
          "width": 3,
          "height": 3
        }
      },
      {
        "id": "mttr_metric",
        "type": "metric",
        "label": "⏱️ Mean Time to Resolution (MTTR)",
        "description": "Average time from error occurrence to resolution",
        "query": {
          "collection": "error_log",
          "where": [
            ["resolved", "==", true],
            ["timestamp", ">=", "now-30d"]
          ],
          "aggregate": "avg",
          "field": "resolution_time"
        },
        "format": "duration",
        "position": {
          "row": 17,
          "col": 4,
          "width": 3,
          "height": 3
        }
      },
      {
        "id": "top_error_messages",
        "type": "list",
        "label": "🔝 Top Error Messages (Last 7 days)",
        "description": "Most frequently occurring error messages",
        "query": {
          "collection": "error_log",
          "where": [
            ["timestamp", ">=", "now-7d"]
          ],
          "groupBy": "message",
          "orderBy": ["count", "desc"],
          "limit": 10
        },
        "format": {
          "show_count": true,
          "truncate_message": 50
        },
        "position": {
          "row": 17,
          "col": 7,
          "width": 3,
          "height": 3
        }
      }
    ],
    "filters": [
      {
        "field": "severity",
        "type": "multiselect",
        "label": "Severity Level",
        "options": [
          {"value": "info", "label": "Info"},
          {"value": "warning", "label": "Warning"},
          {"value": "error", "label": "Error"},
          {"value": "critical", "label": "Critical"}
        ],
        "default": ["error", "critical"]
      },
      {
        "field": "agent_name",
        "type": "select",
        "label": "Agent",
        "source": "distinct",
        "placeholder": "All Agents"
      },
      {
        "field": "resolved",
        "type": "boolean",
        "label": "Resolution Status",
        "labels": {
          "all": "Show All",
          "true": "Resolved Only",
          "false": "Unresolved Only"
        },
        "default": "false"
      },
      {
        "field": "timestamp",
        "type": "daterange",
        "label": "Time Range",
        "presets": [
          {"value": "today", "label": "Today"},
          {"value": "last-7d", "label": "Last 7 Days"},
          {"value": "last-30d", "label": "Last 30 Days"},
          {"value": "last-90d", "label": "Last 90 Days"},
          {"value": "custom", "label": "Custom Range"}
        ],
        "default": "last-7d"
      },
      {
        "field": "unique_id",
        "type": "text",
        "label": "Unique ID",
        "placeholder": "04.01.02.05.10000.001"
      },
      {
        "field": "process_id",
        "type": "text",
        "label": "Process ID",
        "placeholder": "Enrich Contacts from Apify"
      }
    ],
    "tabs": [
      {
        "id": "overview",
        "label": "Overview",
        "icon": "dashboard",
        "widgets": [
          "error_counter_critical",
          "error_counter_open",
          "error_counter_resolved_24h",
          "severity_breakdown",
          "agent_error_rates",
          "error_timeline"
        ]
      },
      {
        "id": "active_errors",
        "label": "Active Errors",
        "icon": "alert-triangle",
        "widgets": ["recent_errors"],
        "default_filter": {
          "resolved": false,
          "severity": ["error", "critical"]
        }
      },
      {
        "id": "metrics",
        "label": "Metrics",
        "icon": "bar-chart",
        "widgets": [
          "resolution_rate",
          "mttr_metric",
          "top_error_messages",
          "agent_error_rates"
        ]
      }
    ],
    "export": {
      "enabled": true,
      "formats": ["csv", "json", "pdf"],
      "max_rows": 10000
    },
    "refresh": {
      "auto": true,
      "interval_seconds": 30,
      "pause_on_interaction": true
    }
  },
  "metadata": {
    "created_at": "2025-01-20",
    "created_by": "Barton Outreach Core Team",
    "version": "1.0",
    "last_updated": "2025-01-20"
  }
}
